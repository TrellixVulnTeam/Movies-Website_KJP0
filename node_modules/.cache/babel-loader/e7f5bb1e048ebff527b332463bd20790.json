{"ast":null,"code":"var _jsxFileName = \"D:\\\\MovieApp\\\\src\\\\Components\\\\search\\\\searchResults.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport { findMovie } from '../../Services/apicontroller';\nimport Card from \"./Card\";\nimport Preloader from '../preloader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Results() {\n  _s();\n\n  const [isloading, setIsLoading] = useState(true);\n  const {\n    Search\n  } = useParams();\n  const [movies, setMovies] = useState([]);\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [result, setResult] = useState(movies);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  useEffect(() => {\n    const findMovies = async () => {\n      setIsLoading(true);\n      const result = await findMovie(Search);\n\n      if (result.ok) {\n        const data = await result.json();\n        return data;\n      }\n    };\n\n    findMovies().then(x => {\n      setMovies(x.results);\n      setCurrentPage(x.page);\n      setTotalPages(x.total_pages);\n      setIsLoading(false);\n      console.log(x);\n    });\n  }, [Search]);\n  useEffect(() => {\n    setResult(movies);\n  }, [movies]);\n\n  function filterMovies() {\n    if (filterValue.length > 2) {\n      var filters = movies.filter(x => {\n        let release_year = x.release_date.substring(0, 4);\n        console.log(\"release_year\", release_year);\n        console.log(\"filterValue\", filterValue);\n        return release_year === filterValue;\n      });\n      setResult(filters);\n    } else {\n      setResult(movies);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center justify-content-end mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"mr-3\",\n            children: [\"Filter \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginRight: \"0\"\n              },\n              children: `${Search.toUpperCase()}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 49\n            }, this), \" by year of release:\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"d-flex form-group\",\n            onSubmit: e => {\n              e.preventDefault();\n              filterMovies();\n            },\n            method: \"post\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"number\",\n              name: \"Year\",\n              id: \"year\",\n              min: \"1888\",\n              placeholder: \"Release year\",\n              onChange: e => setFilterValue(e.target.value),\n              value: filterValue,\n              pattern: \"\\\\d*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              className: \"btn btn-success ml-2\",\n              value: \"Apply filter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 25\n            }, this), filterValue.length > 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-danger ml-2\",\n              onClick: _ => {\n                setFilterValue('');\n                filterMovies();\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fas fa-broom\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 152\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 53\n            }, this) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row \",\n      children: isloading ? /*#__PURE__*/_jsxDEV(Preloader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 26\n      }, this) : result.length !== 0 ? result.map(movie => {\n        return /*#__PURE__*/_jsxDEV(Card, {\n          id: movie.id,\n          poster_path: movie.poster_path,\n          title: movie.title,\n          release_date: movie.release_date,\n          overview: movie.overview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 32\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex w-100 align-items-center justify-content-center\",\n        style: {\n          height: \"78vh\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"No movie to display\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 120\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 13\n  }, this);\n}\n\n_s(Results, \"K+jnP5TUPBt3793GUlN0azXT8us=\", false, function () {\n  return [useParams];\n});\n\n_c = Results;\nexport default Results;\n\nvar _c;\n\n$RefreshReg$(_c, \"Results\");","map":{"version":3,"sources":["D:/MovieApp/src/Components/search/searchResults.jsx"],"names":["useState","useEffect","useParams","findMovie","Card","Preloader","Results","isloading","setIsLoading","Search","movies","setMovies","filterValue","setFilterValue","result","setResult","currentPage","setCurrentPage","totalPages","setTotalPages","findMovies","ok","data","json","then","x","results","page","total_pages","console","log","filterMovies","length","filters","filter","release_year","release_date","substring","marginRight","toUpperCase","e","preventDefault","target","value","_","map","movie","id","poster_path","title","overview","height"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { findMovie } from '../../Services/apicontroller';\r\nimport Card from \"./Card\";\r\nimport Preloader from '../preloader'\r\n\r\nfunction Results() {\r\n    const [isloading, setIsLoading] = useState(true)\r\n    const { Search } = useParams()\r\n    const [movies, setMovies] = useState([])\r\n    const [filterValue, setFilterValue] = useState(\"\")\r\n    const [result, setResult] = useState(movies)\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [totalPages, setTotalPages] = useState(1)\r\n    useEffect(() => {\r\n        const findMovies = async () => {\r\n            setIsLoading(true)\r\n            const result = await findMovie(Search)\r\n            if (result.ok) {\r\n                const data = await result.json()\r\n                return data\r\n            }\r\n        }\r\n        findMovies().then(x => {\r\n            setMovies(x.results)\r\n            setCurrentPage(x.page)\r\n            setTotalPages(x.total_pages)\r\n            setIsLoading(false)\r\n            console.log(x)\r\n        })\r\n    }, [Search])\r\n\r\n    useEffect(() => {\r\n        setResult(movies)\r\n    }, [movies])\r\n\r\n    function filterMovies() {\r\n\r\n        if (filterValue.length > 2) {\r\n            var filters = movies.filter(x => {\r\n                let release_year = x.release_date.substring(0, 4);\r\n                console.log(\"release_year\", release_year)\r\n                console.log(\"filterValue\", filterValue)\r\n                return release_year === filterValue\r\n            })\r\n            setResult(filters)\r\n        } else {\r\n            setResult(movies)\r\n        }\r\n    }\r\n\r\n    return (<div className=\"container mt-3\">\r\n        <div className=\"row\">\r\n            <div className=\"col col-12\">\r\n\r\n                <div className=\"d-flex align-items-center justify-content-end mb-3\">\r\n\r\n                    <h5 className=\"mr-3\">Filter <span style={{ marginRight: \"0\" }}>{`${Search.toUpperCase()}`}</span> by year of release:</h5>\r\n                    <form className=\"d-flex form-group\" onSubmit={(e) => { e.preventDefault(); filterMovies() }} method=\"post\">\r\n                        <input className=\"form-control\" type=\"number\" name=\"Year\" id=\"year\" min=\"1888\"\r\n                            placeholder=\"Release year\" onChange={(e) => setFilterValue(e.target.value)} value={filterValue} pattern=\"\\d*\" />\r\n                        <input type=\"submit\" className=\"btn btn-success ml-2\" value=\"Apply filter\" />\r\n                        {(filterValue.length > 0) ? <button className='btn btn-outline-danger ml-2' onClick={_=> {setFilterValue(''); filterMovies()}}><i class=\"fas fa-broom\"></i></button>:'' }\r\n                        \r\n                        </form>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"row \">\r\n\r\n            {isloading ? <Preloader /> :\r\n                result.length !== 0 ?\r\n                    result.map(movie => {\r\n                        return <Card id={movie.id} poster_path={movie.poster_path} title={movie.title} release_date={movie.release_date} overview={movie.overview}></Card>\r\n                    }) :\r\n                    <div className=\"d-flex w-100 align-items-center justify-content-center\" style={{ height: \"78vh\" }}><h2>No movie to display</h2></div>\r\n\r\n            }\r\n\r\n        </div>\r\n    </div >\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default Results;"]},"metadata":{},"sourceType":"module"}